# 簡易版SEO最適化システム要件定義書

## 1. システム概要
本システムは、クリニックのウェブサイトのSEO最適化を支援するための簡易的なツールです。Streamlitを使用したPythonアプリケーションとして実装し、ウェブスクレイピング、データ分析、外部LLM（大規模言語モデル）との連携を通じて、効果的なSEO最適化提案を生成します。

## 2. 主要機能
2.1 ユーザー入力
- クリニックサイトのURLを入力
- SEO最適化の目標を簡潔に入力

2.2 サイト分析
- 指定されたURLのクリニックサイトをスクレイピング
- 同一ドメイン内の全ページのタイトル、ディスクリプション、クリニック住所を抽出
- ページコンテンツの取得

2.3 データ前処理
- クリニックの先生の名前と経歴のみを匿名化
- クリニックの住所は保持

2.4 SEO最適化提案
- 外部LLM（GPT-4oまたはGPT-4o mini）を使用
- 各ページの内容を分析し、クリニックの住所情報を考慮
- 最適化されたタイトルとディスクリプションを3つずつ提案

2.5 結果表示
- 各ページの既存のタイトル/ディスクリプションと提案された内容を比較表示
- クリニックの住所情報を含めた最適化提案を表示

## 3. 技術仕様
3.1 開発環境
- 言語: Python 3.8+
- フレームワーク: Streamlit (無料版)
- 外部LLM: GPT-4oまたはGPT-4o mini（OpenAI API使用）

3.2 主要ライブラリ
- requests: ウェブスクレイピング
- beautifulsoup4: HTML解析
- openai: OpenAI APIとの連携

## 4. ユーザーインターフェース設計
4.1 入力セクション
- クリニックサイトURL入力フィールド（st.text_input()使用）
- SEO目標入力用のテキストエリア（st.text_area()使用）
- 「分析開始」ボタン（st.button()使用）

4.2 結果表示セクション
- 各ページの結果を折りたたみ可能なセクションで表示（st.expander()使用）
- 現在のタイトル、ディスクリプション、クリニック住所
- 最適化されたタイトルとディスクリプションの提案（3つずつ）

## 5. 外部LLMの利用
5.1 使用モデル
- GPT-4oまたはGPT-4o mini

5.2 APIキー管理
- 環境変数を使用してAPIキーを管理

5.3 プロンプト設計
- ページ内容、SEO目標、現在のタイトル/ディスクリプション、クリニック住所を含める
- クリニックのSEOに特化した指示を含める

5.4 レスポンス解析
- タイトルとディスクリプションの提案を抽出

## 6. データフロー
6.1 入力処理
- ユーザーが入力したURLとSEO目標を検証
- クリニックサイトをスクレイピング

6.2 データ前処理
- クリニックの先生の名前と経歴のみを匿名化
- クリニックの住所情報を抽出し保持

6.3 外部LLM処理
- プロンプトの生成と API 呼び出し
- レスポンスの解析

6.4 結果表示
- Streamlitコンポーネントを使用して結果を表示

## 7. 簡易的なプライバシー保護
7.1 限定的な個人情報の匿名化
- クリニックの先生の名前と経歴のみを検出し匿名化
- 簡易的な置換処理（例：「山田太郎」→「[医師名]」）

7.2 クリニック住所の取り扱い
- クリニックの住所情報は匿名化せずにそのまま使用

7.3 データ保持
- 処理完了後、スクレイピングしたデータを即時削除

## 8. エラーハンドリング
8.1 基本的なエラー処理
- URLの形式チェック
- スクレイピング失敗時のエラーメッセージ表示
- API呼び出し失敗時の再試行（最大3回）

## 9. パフォーマンス考慮事項
9.1 軽量化
- 同時に処理するページ数の制限（例：最大10ページ）
- 大きな画像やスクリプトのスクレイピングを避ける

9.2 Streamlit無料版での最適化
- セッションステートの活用による再計算の最小化
- キャッシュ機能（@st.cache_data）の適切な使用

## 10. 開発とテスト
10.1 開発プロセス
- GitHubを使用したバージョン管理
- シンプルな機能ごとの段階的な開発

10.2 基本的なテスト
- 主要機能の動作確認
- 異なるクリニックサイトでのテスト実行

## 11. デプロイメント
11.1 Streamlit Cloud（無料版）へのデプロイ
- GitHubリポジトリと連携したデプロイ
- 環境変数の設定（APIキーなど）

11.2 利用制限の考慮
- Streamlit無料版の利用制限内でのアプリケーション設計

## 12. ドキュメンテーション
12.1 簡易ユーザーガイド
- システムの基本的な使用方法の説明
- 入力形式とアウトプットの解釈方法

12.2 開発者向けREADME
- セットアップ手順
- 主要機能の簡単な説明

この要件定義書は、クリニックのSEO最適化に特化した軽量なシステムの構築に焦点を当てています。セキュリティや認証機能は最小限に抑え、主要な機能であるSEO分析と最適化提案の生成に注力します。クリニックの住所情報を重要なSEO要素として扱い、先生の名前と経歴のみを匿名化する設計になっています。Streamlitの無料版での利用を前提とし、システムの軽量化と主要機能の効率的な実装を目指します。